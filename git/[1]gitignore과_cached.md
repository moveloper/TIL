## 왜 항상 gitignore에 제외파일을 설정해도 사라지지 않았던걸까...?

프로젝트를 하거나 깃허브 업로드를 할 때 gitignore 파일에 제외파일을 설정해도 계속 추적되는 경우가 많았다. 구글링하면 항상 --cache 명령어를 사용한 해결방법이 나와있었는데, 매번 그냥 따라하기만 하고 왜 해결되는 지 고민하지 않았었다. 또 어떤 때는 한창 프로젝트 중에 gitignore에 파일을 등록해도 잘 먹히는 때가 있었다. 자료를 찾아보다가 내가 간과하고 넘어갔던 개념들 때문에 쉽게 이해가 되지 않았다는 것을 깨달았다.   

* git은 트래킹하고 있는 파일을 .gitignore에 추가하더라도 무시하지 않고, 계속 트래킹을 한다.
* 스테이지 영역에는 수정/삭제 등 변화가 없는 모든 파일도 대기중이다 (`git ls-files --stage` 명령을 사용하면 보인다!)
즉 소스트리와 같은 툴에서 눈에 안보이더라도 트래킹중이었던 것.

이 두가지 개념을 모르고 있어서 헷갈렸다. 

이를 해결하기 위해서는 스테이지 영역에서 끌어내리는 명령어를 해주어야 하고, 그것이 바로 `git rm --cached` 명령어였던 것이다. 
이를 ignore 추가한 해당 파일을 일일히 해줄 수 있지만 
`git rm -r --cached .` 명령어를 사용하면 스테이지에 있는 전체 파일을 재귀적으로 순회하여 스테이지에서 끌어내린다. 그러면
모든 파일이 untracked 상태가 되고 다시 `git add .` 명령어를 입력하게 되면 gitignore 파일에 적힌 제외파일 목록을 인식하게 되고, 기존에 계속 트래킹 중이던 파일을 그제서야 트래킹하지 않게 된다.

스테이지 영역을 커밋하기 전에 단순히 거쳐가는 곳이라고만 생각했었는데 다시 기초부터 복습하는 시간을 가져야겠다... 

